# План модернизации — обсуждение с CTO

> **Дата:** 2026-02-09
> **Статус:** Черновик для обсуждения
> **Контекст:** Поэтапная модернизация BI и кабинета CAS

---

## Принцип

Основной артефакт — таблица фаз ниже. Это не waterfall-роадмап с датами, а последовательность unlock'ов: каждая фаза открывает новый слой данных и даёт ценность обеим сторонам.

**Определённость убывает с каждой фазой.** По фазе 1 всё понятно уже сейчас — на основании интервью с клиентами и понимания текущих задач. Дальше нарастают неизвестные: готовность BI data platform, слаженность команды, приоритеты бизнеса.

Поэтому подход такой:
- **Фаза 1** — ищем дизайнера, получаем макеты, отдаём на фронтенд. Закрываем первую часть потребностей. Заодно смотрим: насколько быстро и качественно получилось сделать. Это калибровка команды.
- **Фазы 2–4** — планируем на уровне "что разблокирует", а не "сколько спринтов". Детализируем по мере того, как завершаем предыдущую фазу и понимаем реальную скорость.

Фазы могут идти параллельно, где позволяют ресурсы.

---

## Фазы

| # | Фаза | Определённость | Что разблокирует | Клиенты получают | CAS получает | Побочный эффект |
|---|-------|---------------|-----------------|------------------|--------------|-----------------|
| 1 | **BI Design + шаблон** | Высокая — понятно что и как | Новый UI на текущих данных (Network Reports) | L1: новый вид, нет тормозов, экспорт, eCPM per type | Единый вид из 1С без тормозов. Данные объединены даже на тех же источниках | Калибровка команды: бэклоги, прозрачность, скорость |
| 2a | **ILRD** | Средняя — зависит от инфры | Impression-level данные | Когортный анализ, разбивка по SDK/App version, диагностика по сетям | Совместная работа с Денисом (SDK): анализ по версиям → стабильнее релизы | — |
| 2b | **ILRD + сплитовалка** | Средняя — зависит от 2a | A/B тесты на ILRD | Self-service эксперименты, experiment registry | Таргетинг по параметрам → грамотная система экспериментов. RND-гипотезы (13 шт.) проверяются в BI | — |
| 3 | **Подключение MMP** | Низкая — зависит от готовности data platform и договорённостей с клиентами | Данные собственной MMP клиента (AppsFlyer, Adjust) | Unified Report (Spend + Revenue + Events), прогноз LTV, ROAS | Единый пайплайн — новый MMP = только адаптер | — |
| 4 | **Publishing** | Низкая — зависит от всего выше + бизнес-решений | Полный контур UA + Monetization | PubC: self-service тест игры. Pub: profit, predictive LTV, health indicator | Масштабирование паблишинга без ручного труда. Выход из 1С | — |

---

## Фаза 1 подробнее: BI Design + шаблон

### Почему первая
- Минимальные зависимости — работаем на текущих данных (Network Reports)
- Быстрый видимый результат для клиентов
- Устанавливает процессы работы с командой

### Что делаем
- Новый UI: тёмная тема, chip-фильтры, graph + table (Amplitude-стиль)
- Quick View: 5 виджетов (Revenue, DAU, ARPDAU, eCPM per type, Fill Rate)
- Reports: гибкие отчёты с экспортом (CSV, Excel)
- Сравнение периодов (inline, как AppsFlyer)
- Toggle комиссии gross/net — показывать данные с комиссией CAS или без (у каждого приложения своя ставка)
- Карточка приложения: владелец, портфолио, менеджер, комиссия. Админ группирует по менеджерам
- UX-фиксы: 10 багов из интервью Савенкова (фильтры, кнопка экспорта, дата)

### Что НЕ делаем в фазе 1
- Когорты (нужен ILRD)
- Unified Report (нужен MMP)
- Предиктивный LTV (нужен MMP)
- Сплитовалку (нужен ILRD)

### Критерий готовности
L1-клиент видит Revenue, DAU, ARPDAU, eCPM per ad type, Fill Rate с разбивкой по дате/app/country/network/ad type. Экспорт и сравнение работают. Не тормозит.

### Техническая реализация (подтверждено на встрече 09.02)
- Борис создаёт агрегированные таблицы (materialized views) из существующих данных
- Не переносим данные из 1С — воспроизводим вид на уже оптимизированных данных
- Запланирован переезд на self-hosted ClickHouse (500 ГБ ILRD в облаке → дешевле и быстрее)

### Внутренний бонус
- Те же данные, объединённые в новом движке = правильный вид вместо 1С (без тормозов)
- Portfolio overview для Management — группировка по менеджерам, приложениям, клиентам
- Процессы: бэклоги, таск-трекер, прозрачность, ретро

---

## Фаза 2a подробнее: ILRD

### Что разблокирует ILRD
Переход с агрегированных Network Reports на Impression-Level Revenue Data.

| Было (Network Reports) | Стало (ILRD) |
|------------------------|--------------|
| Агрегаты за день | Данные по каждому показу |
| Нет версий SDK/App | Разбивка по SDK version, App version |
| Нет когорт | Когортный анализ |
| Средний eCPM | eCPM по сети + версии + стране |
| Нет диагностики | Аномалии, gaps, version impact |

### Ценность для Дениса и SDK-команды

Денис — глава разработки SDK. Сейчас у команды SDK нет инструментов для анализа влияния релизов. ILRD меняет это в два шага:

**Шаг 1 (фаза 2a): Анализ по версиям**
- Сравнение Revenue/eCPM/Fill Rate между версиями SDK — быстро видно, сломал ли релиз монетизацию
- Скорость раскатки: % пользователей на каждой версии по дням (US-RND-02)
- Поиск клиентов на старой SDK для коммуникации (US-RND-03)
- Диагностика проблем у конкретного клиента по версии (US-RND-05)
- Результат: выпуск SDK стабильнее, проблемы находятся быстрее

**Шаг 2 (фаза 2b): Таргетинг + эксперименты**
- Таргетинг по параметрам (версия, страна, сегмент) → грамотная система A/B тестов
- Детерминированная сплитовалка → self-service запуск экспериментов
- Experiment Registry с результатами в BI
- Результат: 13 RND-гипотез проверяются системно, а не в spreadsheets

Это совместная работа Product + SDK — начинаем с простого (анализ версий), наращиваем до полного контура экспериментов.

### Ценность для клиентов (L2)

Клиенты тоже просят стабильность SDK — из интервью:
- US-L2-01: оценка влияния SDK-обновления на монетизацию
- US-L2-02: поиск багов в конкретных билдах
- US-L2-03: сравнение версий приложения
- US-L2-12: отслеживание раскатки версии (Active Users by Version by Day)
- US-L2-13: поиск проблемной версии (Impressions by Version)
- Saved Views, Deep Linking

---

## Фаза 3: Подключение MMP

### Предпосылка
Клиент разрешает CAS доступ к данным своей MMP (AppsFlyer, Adjust, Tenjin).

### Что разблокирует
| Данные MMP | Что появляется |
|------------|---------------|
| Installs + Attribution | Unified Report: Spend + Revenue + Events по GEO + AdType |
| Events | Фанлы, retention по источникам |
| Spend | ROAS, CPI |
| Cohorts | Предиктивный LTV, payback days |

### Архитектурный принцип (R2)
Новый MMP = новый адаптер на Ingestion Layer. Semantic Layer, витрины и UI не меняются.

---

## Фаза 4: Publishing

### PubC (Candidate Portal)
- Upload APK → автотест → результаты за 3 дня
- CPI, Retention D1/D3/D7, Playtime
- Status badge (green/yellow/red)
- Креативы: upload + performance table

### Pub (Publishing Partners)
- Net income (Revenue - UA Cost - CAS commission)
- Predictive LTV для приоритизации разработки
- Health indicator
- ROAS в кабинете
- A/B тесты в дашборде

### Внутренний бонус
- Масштабирование паблишинга без ручного труда
- Выход из 1С для Publishing-учёта

---

## Решения (встреча 09.02)

### Процессы и команда
1. **Таск-трекер** → ClickUp (пока). Ждём решение холдинга по Asana. "Работаем в том, что есть"
2. **Прозрачность** → Алексей создаёт шаблон проектного пространства, критика от команды
3. **Ритуалы** → начнём с митингов по мере поступления (дизайн готов → к Руслану), формализуем позже

### Фаза 1
4. **Источник данных** → агрегированные таблицы (materialized views) из существующих данных. Борис делает. Не миграция из 1С, а оптимизированное воспроизведение
5. **Дизайнер** → внешний фрилансер. Кандидат найден, встреча завтра. Бюджет утверждает Саша
6. **Объединение данных** → вид "анализ приложений" из 1С + менеджер/портфолио/комиссия. Toggle gross/net для сравнения с конкурентами

### Фаза 2
7. **ILRD** → 500 ГБ уже пишутся в облачный ClickHouse. Переезд на self-hosted запланирован. Обсудить детали с Борисом
8. **Денис (SDK)** → свой roadmap (server bidding, стабильность). Алексей выровняет словари. ILRD = то, что Денис и так делает. Начать обсуждение 2b заранее — Денис может сказать "через 2 месяца"

### Архитектура
9. **MMP** → "решается на уровне API". Заложить в архитектуру, что добавится атрибуция (свой Tenjin или клиентский Adjust)

## Следующие шаги

| # | Действие | Кто | Срок |
|---|----------|-----|------|
| 1 | Встреча с дизайнером, оценка бюджета | Алексей | Эта неделя |
| 2 | Утверждение бюджета на дизайнера | Алексей + Саша | Эта неделя |
| 3 | Митинг с Борисом + новым дата-инженером по Фазе 1 | Алексей + Вова | Ближайшее |
| 4 | Выровнять словари и roadmap с Денисом | Алексей | Ближайшее |
| 5 | Создать проектное пространство в ClickUp | Алексей | Эта неделя |
| 6 | Макет → Руслан (фронтенд) | После дизайна | — |

---

## Связь с существующими документами

| Документ | Что даёт |
|----------|---------|
| `03-product/product-strategy.md` | Полная стратегия (6 стримов, H1/H2 горизонты) |
| `03-product/design-spec-bi.md` | UI-спецификация (Quick View, Reports) |
| `03-product/current-bi-state.md` | Текущие метрики и ограничения |
| `04-bi/metrics-dictionary.md` | 70 метрик с формулами и уровнями доступа |
| `03-product/user-stories.md` | 60+ user stories по ролям |
| `03-product/rnd-hypotheses.md` | 13 гипотез для тестирования |
| `01-platform/known-constraints.md` | Ограничения команды и платформы |
