# BI MVP — Задачи для ClickUp

> Готовые задачи для импорта в ClickUp (проект B2B / CAS).

---

## Milestone 1: Каркас + Quick View

### [B2B] Выбрать и согласовать UI-шаблон
- **Исполнитель:** Руслан
- **Описание:**
  Проанализировать платные Vue-шаблоны и выбрать подходящий.
  Критерии: Vue 3, Tailwind (или современный CSS), тёмная тема, качественные таблицы (зебра, sticky header, сортировка), отсутствие jQuery и legacy JS.
  Бюджет: $100–200.
  Результат: ссылка на шаблон + короткий обзор (что берём из коробки, что дописываем).
- **Чеклист:**
  - [ ] Обзор 3–5 шаблонов
  - [ ] Проверить стек (Vue 3, Tailwind, chart-библиотека)
  - [ ] Проверить качество таблиц
  - [ ] Проверить тёмную тему
  - [ ] Согласовать с Алексеем (внешний вид)

### [B2B] Подключить шаблон и собрать каркас
- **Исполнитель:** Руслан
- **Блокер:** Выбор шаблона
- **Описание:**
  Развернуть выбранный шаблон, настроить проект (Vue 3, роутинг), собрать каркас кабинета:
  - Sidebar (сворачиваемый): Analytics (активный), Apps, Docs, Support (заглушки), профиль пользователя
  - Навигация: вкладки Quick View / Reports
  - Тёмная тема по умолчанию
  Деплой на стейдж.
- **Чеклист:**
  - [ ] Инициализировать проект на Vue 3
  - [ ] Подключить шаблон и стили
  - [ ] Sidebar с навигацией
  - [ ] Роутинг (Quick View / Reports)
  - [ ] Тёмная тема
  - [ ] Деплой на стейдж

### [B2B] Quick View — карточки метрик
- **Исполнитель:** Руслан
- **Блокер:** Каркас
- **Описание:**
  5 KPI-карточек в верхней части Quick View:
  1. DAU — средний за период
  2. Revenue — сумма Ad Revenue
  3. ARPDAU — Revenue / DAU
  4. eCPM — Revenue / Impressions × 1000
  5. Impressions/DAU — среднее кол-во показов на пользователя
  Каждая карточка: значение + динамика vs предыдущий аналогичный период (стрелка ▲▼ + %).
  Данные: хардкод / JSON.
- **Чеклист:**
  - [ ] Компонент карточки (значение, дельта, иконка)
  - [ ] 5 карточек с моковыми данными
  - [ ] Динамика (% изменения, цвет: зелёный/красный)

### [B2B] Quick View — Revenue Trend chart
- **Исполнитель:** Руслан
- **Блокер:** Каркас
- **Описание:**
  Multi-line chart — выручка по дням за выбранный период.
  - All Apps: отдельная линия на приложение (с легендой и цветом)
  - Одно приложение: одна линия
  Данные: JSON-мок.
- **Чеклист:**
  - [ ] Выбрать chart-библиотеку (из шаблона или ApexCharts/Chart.js)
  - [ ] Multi-line chart с легендой
  - [ ] Реакция на App Selector

### [B2B] Quick View — Revenue by Network
- **Исполнитель:** Руслан
- **Блокер:** Каркас
- **Описание:**
  Stacked horizontal bar + grid-раскладка сетей.
  Для каждой сети: revenue ($), доля (%), eCPM.
  Неактивные сети: серым, "No data".
  Сети: AppLovin, AdMob, Unity, ironSource, Meta AN, Bigo, Kidoz и др.
  Данные: JSON-мок.
- **Чеклист:**
  - [ ] Stacked bar chart
  - [ ] Grid карточек сетей (revenue, %, eCPM)
  - [ ] Неактивные сети серым

### [B2B] Quick View — App Selector и Period Selector
- **Исполнитель:** Руслан
- **Блокер:** Каркас
- **Описание:**
  Два фильтра в шапке Quick View:
  1. App Selector: dropdown с поиском, мультивыбор, "All Apps" по умолчанию
  2. Period Selector: Today / Last 7d / Last 30d / This Month / Custom (date range picker)
  При изменении — обновляются все компоненты на странице.
- **Чеклист:**
  - [ ] App Selector (dropdown, поиск, мультивыбор)
  - [ ] Period Selector (пресеты + custom range)
  - [ ] Связь фильтров с карточками, графиками

### [B2B] Деплой Quick View на стейдж
- **Исполнитель:** Руслан
- **Блокер:** Все задачи Quick View
- **Описание:**
  Развернуть собранный Quick View на стейдж-сервере. URL: cabinet.cas.ai или аналогичный субдомен. Показать команде, собрать первый фидбек.
- **Чеклист:**
  - [ ] Деплой на стейдж
  - [ ] Проверить тёмную тему
  - [ ] Демо команде

---

## Milestone 2: Reports

### [B2B] Reports — chip-based фильтры
- **Исполнитель:** Руслан
- **Блокер:** Milestone 1
- **Описание:**
  Фильтры в виде chip-ов (теги с ×):
  - Period (обязательный)
  - App (обязательный)
  - Platform (iOS / Android)
  - Country
  - Ad Type (Rewarded, Interstitial, Banner, AppOpen)
  Кнопка [+] для добавления фильтров. × для удаления.
  Референс: Appodeal.

### [B2B] Reports — разбивки (Splits)
- **Исполнитель:** Руслан
- **Блокер:** Milestone 1
- **Описание:**
  Chip-based выбор разбивок:
  - Date, App, Platform, Ad Type, Country
  - Порядок chips = порядок группировки
  - Drag & drop для изменения порядка
  Кнопки [Apply] и [Reset].

### [B2B] Reports — таблица данных
- **Исполнитель:** Руслан
- **Блокер:** Фильтры + Splits
- **Описание:**
  Основной компонент Reports:
  - Sticky header
  - Sticky footer с итогами (TOTAL)
  - Сортировка по клику на заголовок
  - Зебра-стайл (чередование строк)
  - Грамотные заголовки, тогглы сортировки
  Метрики-столбцы: Revenue, DAU, ARPDAU, eCPM, Fill Rate, Impressions (выбираются пользователем).

### [B2B] Reports — toggle Table/Chart + CSV Export
- **Исполнитель:** Руслан
- **Блокер:** Таблица
- **Описание:**
  - Toggle переключатель: Table (по умолчанию) / Chart (bar или line)
  - Кнопка CSV Export — выгрузка текущего среза в CSV

---

## Milestone 3: Живые данные

### [B2B] Подготовить materialized views для BI
- **Исполнитель:** Борис + дата-инженеры
- **Описание:**
  Подготовить данные в ClickHouse для MVP BI:
  - Revenue, DAU, Impressions по дням / приложениям / сетям / платформам / странам / ad type
  - Materialized views с преагрегацией
  - Latency target: < 2 сек
  Связь: roadmap D1.

### [B2B] Отчёт по производительности БД
- **Исполнитель:** Руслан → Борис
- **Описание:**
  Проанализировать эффект добавленных индексов. Оценить, достаточно ли текущей производительности или нужна миграция на ClickHouse. Подготовить отчёт для Бориса.

### [B2B] Переключить фронт на живой API
- **Исполнитель:** Руслан
- **Блокер:** Materialized views + Reports готов
- **Описание:**
  Заменить моковые данные / B2B на ClickHouse API. Добавить лимит 50K строк с сообщением пользователю. UI не меняется — только источник данных.

### [B2B] Описать формулы метрик для бэкенда
- **Исполнитель:** Борис
- **Описание:**
  Документировать формулы расчёта метрик, какие доступны из B2B данных, какие потребуют ClickHouse. Передать Руслану.
  Справочник: `04-bi/metrics-dictionary.md`.

---

## Организационные задачи

### [B2B] Прикрепить документацию в Slack-канал
- **Исполнитель:** Алексей
- **Описание:**
  Собрать в одном месте:
  - Ссылка на прототип OneBI
  - Ссылки от дизайнера (референсы, элементы)
  - Спецификации (design-spec-bi, metrics-dictionary)
  - План проекта (этот документ)

### [B2B] Настроить стейдж-окружение
- **Исполнитель:** Руслан
- **Описание:**
  Настроить стейдж-сервер для BI-кабинета (субдомен cas.ai). Должен быть доступен команде без запуска локально.
